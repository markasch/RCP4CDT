<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Theory – Optimal Scheduling for Cross-Facility Workflows</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./examples.html" rel="next">
<link href="./intro.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-68c8bffd90dad8f2b55c52d7b6410dc0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-d661fd49052cdedcb9ca2693aa63deef.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="site_libs/quarto-diagram/mermaid.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="site_libs/quarto-contrib/quarto-project/fredguth/tufte/styles.css">
</head>

<body class="nav-sidebar floating slimcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./theory.html">Theory</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./graphics/xwf_logo.svg" alt="" class="sidebar-logo light-content py-0 d-lg-inline d-none">
      <img src="./graphics/xwf_logo.svg" alt="" class="sidebar-logo dark-content py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Optimal Scheduling for Cross-Facility Workflows</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./theory.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Theory</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./examples.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Implementation</span></a>
  </div>
</li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#some-history" id="toc-some-history" class="nav-link active" data-scroll-target="#some-history">Some History…</a></li>
  <li><a href="#supply-chains-with-scheduling" id="toc-supply-chains-with-scheduling" class="nav-link" data-scroll-target="#supply-chains-with-scheduling">Supply Chains with Scheduling</a></li>
  <li><a href="#supply-chain-network-design-with-resource-constrained-scheduling" id="toc-supply-chain-network-design-with-resource-constrained-scheduling" class="nav-link" data-scroll-target="#supply-chain-network-design-with-resource-constrained-scheduling">Supply Chain Network Design with Resource Constrained Scheduling</a>
  <ul class="collapse">
  <li><a href="#problem-definition" id="toc-problem-definition" class="nav-link" data-scroll-target="#problem-definition">Problem Definition</a></li>
  <li><a href="#state-variables" id="toc-state-variables" class="nav-link" data-scroll-target="#state-variables">State Variables</a></li>
  <li><a href="#objective-function" id="toc-objective-function" class="nav-link" data-scroll-target="#objective-function">Objective Function</a></li>
  <li><a href="#sec-math" id="toc-sec-math" class="nav-link" data-scroll-target="#sec-math">Mathematical Formulation - Deterministic Model</a></li>
  </ul></li>
  <li><a href="#dynamic-networks" id="toc-dynamic-networks" class="nav-link" data-scroll-target="#dynamic-networks">Dynamic Networks</a></li>
  <li><a href="#sec-stoch" id="toc-sec-stoch" class="nav-link" data-scroll-target="#sec-stoch">Uncertainty</a>
  <ul class="collapse">
  <li><a href="#stochastic-multistage-programming" id="toc-stochastic-multistage-programming" class="nav-link" data-scroll-target="#stochastic-multistage-programming">Stochastic, multistage programming</a></li>
  </ul></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content page-columns page-full column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Theory</h1>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header>


<div id="theo">

</div>
<section id="some-history" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="some-history">Some History…</h2>
<p>The development of a framework for CDT process scheduling is rooted in the <em>job scheduling problems</em> that emerged with industrialization and assembly-line work. It is not a coincidence that many of the classical scheduling problems have names like Job Shop Problem or Flow Shop Problem. Back then and now the targets are the same: execute complex jobs that might need treatment on different machines in a defined sequential orders with certain degrees of efficiency. Efficiency in this context can be defined in a number of ways. It might be the total time needed to execute a set of jobs, the compliance of given deadlines, the minimization of overall costs or a combination of all the above.</p>
<p>There are two ways to view the the Continuum Digital Twin<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>:</p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;CDT</p></div></div><ol type="1">
<li>Facility- or Machine-centered view.</li>
<li>Job-centered view.</li>
</ol>
<p>The first is best modelled by a <em>supply chain</em> model. The second is principally a <em>scheduling</em> approach.</p>
<div id="fig-SC_SCHED" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-SC_SCHED-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="graphics/sc-sched.svg" class="img-fluid figure-img" style="width:100.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-SC_SCHED-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Two different viewponts of the CDT: a supply chain model (left) and a scheduling model (right). DC = data center, CC = compute center, J = job.
</figcaption>
</figure>
</div>
<p>We propose a <em>combined</em> model for the CDT, composed of a Supply Chain Network Design<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> coupled with a Resource Constrained Process Scheduling<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. In such a hierarchical system, the supply chain model allocates jobs to the best facilities, and the scheduling model then (optimally) sequences jobs among facilities and within a given facility. Supply chain optimization emphasizes “where” (facility choice, data transfer mode). Scheduling emphasizes “when” and “in what order.”</p>
<div class="no-row-height column-margin column-container"><div id="fn2"><p><sup>2</sup>&nbsp;SCND</p></div><div id="fn3"><p><sup>3</sup>&nbsp;RCPSP</p></div></div><div class="page-columns page-full"><p>Recall the basic problem: given a directed graph of <span class="math inline">\(N\)</span> data storage, transfer and processing jobs <span class="math inline">\(\mathscr{J},\)</span> find an optimal allocation <span class="math inline">\(A\)</span> and a feasible schedule <span class="math inline">\(S.\)</span> Further details below.</p><div class="no-row-height column-margin column-container"><span class=""><span class="math inline">\(\mathscr{J}=\{ J_1, J_2, \ldots J_N\},\)</span></span></div></div>
</section>
<section id="supply-chains-with-scheduling" class="level2">
<h2 class="anchored" data-anchor-id="supply-chains-with-scheduling">Supply Chains with Scheduling</h2>
<p>Let us begin by defining supply chains and scheduling in the context of the CDT.</p>
<div id="def-supp" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 1 (Supply Chain)</strong></span> A <em>supply chain</em> is a network (directed graph) of jobs, facilities, data storage, networks, processing and end-product delivery to users. The design poroblem is to optimally allocate an ordered list of data storage and data processing jobs to an optimal choice of storage and processing centres.</p>
</div>
<div id="def-sched" class="theorem definition">
<p><span class="theorem-title"><strong>Definition 2 (Scheduling)</strong></span> <em>Scheduling</em> is a decision-making process that deals with the allocation of (limited) resources to tasks over given time periods. Its goal is to optimize one or more objectives. The resulting <em>schedule</em> is a job sequence determined for every machine (facility) of the processing system.</p>
</div>
<p>These two models are complementary:</p>
<ul>
<li>the SCND can be used for global, over a <em>fixed period</em>, modelling—for example over an entire project duration, or annualized;</li>
<li>the RCPSP can be used for time-dependent models, especially when uncertainty is introduced, as in a two-stage, or multi-stage, model—see below Section <a href="#sec-stoch" class="quarto-xref"><span>Uncertainty</span></a>.</li>
</ul>
<p>In <a href="#fig-wf" class="quarto-xref">Figure&nbsp;<span>2</span></a> and <a href="#fig-wf2" class="quarto-xref">Figure&nbsp;<span>3</span></a> below, we show the two alternative viewpoints of a simple 4-job, 4-machine scheduling problem. The global mathematical formulation will effectively include and <em>combine</em> these two viewpoints, as depicted in <a href="#fig-CDT_RCP_SC" class="quarto-xref">Figure&nbsp;<span>4</span></a> and formulated below.</p>
<div id="fig-wf" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-wf-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">graph LR
    A[0] --&gt;|"$$c_{0,1}$$"| B("$$J_1$$")
    B --&gt;|"$$c_{1,2}$$"| C("$$J_2$$")
    C --&gt;|"$$c_{2,3}$$"| D("$$J_3$$")
    C --&gt;|"$$c_{2,4}$$"| E("$$J_4$$")
    D --&gt;|"$$c_{3,5}$$"| F[5]
    E --&gt;|"$$c_{4,5}$$"| F

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-wf-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Job-centered view: A simple directed graph (DAG) for a genomics workflow with 4 processing jobs <span class="math inline">\(J_1,\cdots, J_4,\)</span> and data transfers <span class="math inline">\(c_{i,j}\)</span> between them, including initial upload and final download. The tasks 0 and 5 are dummy tasks, representing the start and the end of the workflow.
</figcaption>
</figure>
</div>
<div id="fig-wf2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-wf2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    A[(DC1)]:::otherclass --&gt; C{{HPC1}}:::thirdclass
    B[(DC2)]:::otherclass 
    A --&gt; D{{HPC2}}:::thirdclass
    %%A[(data1)]:::someclass --&gt; E{{HPC3}}:::thirdclass
    C --&gt; F[(DC1)]:::otherclass
    C --&gt; G[(DC2)]:::otherclass
    F --&gt; H{{HPC1}}:::thirdclass
    F --&gt; I{{HPC2}}:::thirdclass  
    classDef someclass stroke:#f00
    classDef otherclass stroke:#0f0
    classDef thirdclass stroke:#00f

</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-wf2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Machine-centered view: Supply chain model for the CDT. For a given job, the dataset (stored in one of two Datacentres, <span class="math inline">\(\mathrm{DC}_1\)</span> or <span class="math inline">\(\mathrm{DC}_2\)</span>) can be processed on one of two HPC centres (<span class="math inline">\(\mathrm{HPC}_1\)</span> or <span class="math inline">\(\mathrm{HPC}_2\)</span>), and ouput data is sent to (and stored on) one of the two Datacentres, ready as input for the next job. This is repeated for each job in the ordered job list (DAG).
</figcaption>
</figure>
</div>
<div id="fig-CDT_RCP_SC" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-CDT_RCP_SC-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="graphics/CDT_RCP_SC.svg" class="img-fluid figure-img" style="width:40.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-CDT_RCP_SC-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4: The CDT model is based on RCPSP and SCND.
</figcaption>
</figure>
</div>
</section>
<section id="supply-chain-network-design-with-resource-constrained-scheduling" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="supply-chain-network-design-with-resource-constrained-scheduling">Supply Chain Network Design with Resource Constrained Scheduling</h2>
<section id="problem-definition" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="problem-definition">Problem Definition</h3>
<p>The resource-constrained project scheduling problem is a classical, well-known problem in operations research, and started with the CPM<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> that was developed in the 1950’s. A number of activities are to be scheduled. Each activity has a duration and cannot be interrupted. There are a set of precedence relations between pairs of activities which state that the second activity must start after the first has finished.</p>
<div class="no-row-height column-margin column-container"><div id="fn4"><p><sup>4</sup>&nbsp;Critical Path Method</p></div></div><p>The set of precedence relations are usually given as a directed acyclic graph (DAG), where the edge <span class="math inline">\((i,j)\)</span> represents a precedence relation where job <span class="math inline">\(i\)</span> must finish before job <span class="math inline">\(j\)</span> begins. The DAG contains two additional dummy activities with duration 0, the source and sink, where the source is the first activity and the sink is the last activity.</p>
<p>There are also sets of <em>renewable resources</em> and <em>non-renewable resources.</em> Each resource has a maximum capacity and at any given time slot no more than this amount can be in use. Each activity has a demand (possibly zero) on each resource. The dummy source and sink activities have zero demand on all resources.</p>
<p><em>Multi-Mode Variant</em> The multi-mode resource-constrained project scheduling problem<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> is an extension of the resource-constrained project scheduling problem where each task can be executed in one of a number of alternative modes. The problem aims to select a single task mode from a set of available modes in order to construct a precedence- and resource-feasible project schedule with a minimal makespan. This is similar to a supply chain.</p>
<div class="no-row-height column-margin column-container"><div id="fn5"><p><sup>5</sup>&nbsp;MRCPSP</p></div></div><p><em>Non-Renewable Resources</em> Another extension concerns non-renewable resources. Each non-renewable resource has a capacity for the entire schedule. An example would be a financial, or human resources budget that applies to the entire project. Modes of activities must be chosen to avoid exceeding the total capacity of each of the non-renewable resources.</p>
<p><em>Time Windows</em> Instead of optimizing over the maximum value of the project timespan, we can use time windows. The benefit of time windows is twofold: first, they can be used in the mathematical programming formulation to reduce the number of variables substantially, i.e.&nbsp;they provide a tighter formulation. Second, they can be utilized in several enumeration procedures to speed up the convergence of the underlying optimization algorithms.</p>
</section>
<section id="state-variables" class="level3">
<h3 class="anchored" data-anchor-id="state-variables">State Variables</h3>
<p>The state of the system at a given time <span class="math inline">\(t,\)</span> is represented by a set of <em>binary-valued</em> state variables that designate the facilities that are used, at each stage, by each job to be performed in the workflow.</p>
</section>
<section id="objective-function" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="objective-function">Objective Function</h3>
<p>The overall objective is to combine location decisions—which centres to use—with allocation decisions—how to distribute the workloads and jobs among the chosen centres (data and compute). Various project <em>performance metrics</em> can be optimized, including task-based, resource-based, financial-based and user-based metrics. One can minimize makespan, tardiness, resource consumption, or maximize total NPV with respect to sustainability, for example.</p>
<p>There can be a <em>single</em> objective such as minimizing (any function of) the total of fixed and variable costs, or minimizing the completion time (makespan). <em>Multiple</em> objective optimization<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> seeks a tradeoff between minimum cost and maximum sustainability (minimum environmental impact). Finally, <em>stochastic</em> optimization takes into account the uncertainties of resource availabilities and delays, maintenance and failures, resource allocations, variable energy costs, project costs (HR, budget).</p>
<div class="no-row-height column-margin column-container"><div id="fn6"><p><sup>6</sup>&nbsp;MOO</p></div><div id="fn7"><p><sup>7</sup>&nbsp;Some terms can be ignored by setting the coefficients to zero, depending on the context.</p></div></div><p>The overall, deterministic cost function can be expressed either as a bottleneck objective, where we seek to minimize the longest or most expensive job, or as a weighted sum over all jobs of makespan, cost and any functions of these.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<p>For example, suppose we have <span class="math inline">\(m\)</span> machines <span class="math inline">\(\{M_j\}_{j=1}^{m}\)</span> to process <span class="math inline">\(n\)</span> jobs <span class="math inline">\(\{J_i\}_{i=1}^{n}.\)</span> A job <span class="math inline">\(J_i\)</span> can eventually be broken down into <span class="math inline">\(n_i\)</span> operations <span class="math inline">\(O_{i1},\ldots,O_{in_i},\)</span> each with its own processing requirement <span class="math inline">\(p_{ij}.\)</span></p>
<p><em>Objective Functions</em> Denote the finishing time of job <span class="math inline">\(J_i\)</span> by <span class="math inline">\(C_i\)</span> and the associated cost <span class="math inline">\(f_i(C_i).\)</span> Then there are two types of total cost functions, the <em>bottleneck</em> objective <span class="math display">\[
   f_{\mathrm{max}}(C) \doteq \max \{f_i(C_i) \mid i=1,\ldots,n\}
\]</span> and the <em>sum</em> objective <span class="math display">\[
   \sum f_i(C) \doteq  \sum_{i=1}^{n} f_i(C_i).
\]</span> The sum can also be weighted, if required.</p>
</section>
<section id="sec-math" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="sec-math">Mathematical Formulation - Deterministic Model</h3>
<p><strong>Resource-Constrained Project Scheduling Problem (RCPSP)</strong></p>
<p>The Resource-Constrained Project Scheduling Problem (RCPSP) is an NP-hard combinatorial optimization problem that consists of finding a feasible scheduling for a set of&nbsp;<span class="math inline">\(n\)</span>&nbsp;jobs subject to resource and precedence constraints. Each job has a processing time, a set of successor jobs and a required amount of different resources. Resources may be scarce but are renewable at each time period. Precedence constraints between jobs mean that no jobs may start before all its predecessors are completed. The jobs must be scheduled non-preemptively, i.e., once started, their processing cannot be interrupted.</p>
<p>The RCPSP has the following input data:</p>
<ul>
<li><span class="math inline">\(\mathcal{J} = \{J_1, J_2, \ldots, J_n \}\)</span> set of jobs.</li>
<li><span class="math inline">\(\mathcal{R}\)</span> set of renewable resources.</li>
<li><span class="math inline">\(\mathcal{S}\)</span> set of precedences<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> between jobs&nbsp;<span class="math inline">\((i,j)\in\mathcal{J}\times\mathcal{J}.\)</span></li>
<li><span class="math inline">\(\mathcal{T}\)</span> planning horizon: set of possible processing times for jobs.</li>
<li><span class="math inline">\(p_{j}\)</span> processing time of job&nbsp;<span class="math inline">\(j.\)</span></li>
<li><span class="math inline">\(u_{jr}\)</span> amount of (renewable) resource&nbsp;<span class="math inline">\(r\)</span>&nbsp;required for processing job&nbsp;<span class="math inline">\(j.\)</span></li>
<li><span class="math inline">\(c_{r}\)</span> capacity of renewable resource&nbsp;<span class="math inline">\(r.\)</span></li>
</ul>
<div class="no-row-height column-margin column-container"><div id="fn8"><p><sup>8</sup>&nbsp;These can be rigorously defined using an order relation, <span class="math inline">\(i \prec j\)</span>.</p></div><div id="fn9"><p><sup>9</sup>&nbsp;An alternative formulation, based on <em>disjunctions</em> will be presenetd in the Examples—see <a href="examples.html" class="quarto-xref"><span>Implementation</span></a>.</p></div></div><p>There are many different Mixed Integer Linear Programming (MILP) formulations for the RCPSP. We choose the most suitable, discrete-time (DT) formulation<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a>. This is a binary formulation where we have a binary variable <span class="math inline">\(x_{i,t}\)</span> for each activity <span class="math inline">\(i\)</span> and starting time/date <span class="math inline">\(t,\)</span><br>
<span class="math display">\[ x_{i,t} = \begin{cases} 1, \quad \text{if activity $i$ starts on day/time $t,$} \\ 0, \quad  \text{otherwise.}  \end{cases} \]</span></p>
<p>The binary programming formulation, proposed by Pritsker et al.&nbsp;in 1986 can be written as follows.</p>
<p><span class="math display">\[
\begin{align}
\text{Minimize} \quad &amp;  \sum_{t\in \mathcal{T}} t\cdot x_{n+1,t} &amp; (1)\\
\text{Subject to:} \quad &amp;
\sum_{t\in \mathcal{T}} x_{j,t}  = 1  \,\,\, \forall j\in J &amp; (2)\\
&amp; \sum_{j\in J} \sum_{t_2=t-p_{j}+1}^{t} u_{jr}x_{j,t_2}  \leq c_{r}  \,\,\, \forall t\in \mathcal{T}, r \in R &amp; (3) \\
&amp; \sum_{t\in \mathcal{T}} t\cdot x_{s,t} - \sum_{t \in \mathcal{T}} t\cdot x_{j,t}  \geq p_{j}  \,\,\, \forall (j,s) \in S &amp; (4)\\
&amp; x_{j,t}  \in \{0,1\} \,\,\, \forall j\in J, t \in \mathcal{T} &amp; (5)
\end{align}\]</span></p>
<p>The objective function (1) represents the sum of all possible start dates for the final sink job (dummy variable) <span class="math inline">\(x_{n+1,t}.\)</span> We know that only one of these variables will equal 1 for a specific <span class="math inline">\(t.\)</span> Therefore, by minimizing the sum of the product <span class="math inline">\(t \cdot x_{n+1,t},\)</span> we are effectively minimizing the total project duration. Constraint (2) ensures that each activity <span class="math inline">\(i\)</span> has exactly one start date, i.e.&nbsp;a single execution. Constraint (3) guarantees that for any time period <span class="math inline">\(t,\)</span> the schedule does not exceed the capacity <span class="math inline">\(R_k\)</span> for any resource <span class="math inline">\(k.\)</span> Finally, constraint (4) ensures that if an activity <span class="math inline">\(j\)</span> follows another activity <span class="math inline">\(i,\)</span> then activity <span class="math inline">\(j\)</span> must start after the finish time of activity <span class="math inline">\(i,\)</span> which is equal to the start time of activity <span class="math inline">\(i\)</span> plus its duration <span class="math inline">\(p_i.\)</span></p>
<p><strong>Mutli-Project Multi-Mode RCPSP</strong></p>
<p>Note that the above formulation is restricted to temporal scheduling on a <em>single</em> machine, and for a single project—a collection of jobs. This formulation can be generalized to deal with multiple machines and multiple projects. In this case, the formulation becomes very similar to that of a supply chain. It is referred to in the literature as the <em>multi-mode resource-constrained multi-project scheduling problem</em>, or MRCMPSP.</p>
<p><strong>Multi-Mode</strong> The single-mode RCPSP assumed that each activity has only one way to be executed, whereas the multi-mode RCPSP considers multiple ways to execute an activity, which often have tradeoffs in duration, cost, or resource requirement.</p>
<p>Let the decision variable <span class="math inline">\(x_{jm,t} \in \{0,1 \}\)</span> denote the execution of job <span class="math inline">\(j\)</span> in mode <span class="math inline">\(m\)</span> completed in period <span class="math inline">\(t.\)</span> Then the MRCPSP with tight, time-indexed formulation<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> can be written as:</p>
<div class="no-row-height column-margin column-container"><div id="fn10"><p><sup>10</sup>&nbsp;A disjunctive formulation, based on XOR relations, is also possible—see <a href="examples.html" class="quarto-xref"><span>Implementation</span></a></p></div></div><p><span class="math display">\[
\begin{align}
\min \quad &amp;  \sum_{t=\mathrm{EF}_J}^{\mathrm{LF}_J} t\cdot x_{J1,t} &amp; (1)\\
\text{s.t.} \quad &amp;
\sum_{m=1}^{M_j}  \sum_{t=\mathrm{EF}_J}^{\mathrm{LF}_J} x_{jm,t}  = 1,  \,\,\, j=1,\ldots, J ,&amp; (2)\\
&amp; \sum_{m=1}^{M_j} \sum_{t=\mathrm{EF}_h}^{\mathrm{LF}_h} t \cdot x_{hm,t} \le \sum_{m=1}^{M_j}\sum_{t=\mathrm{EF}_j}^{\mathrm{LF}_j} (t - p_{jm}) \cdot x_{jm,t},  \,\,\, j=2,\ldots, J, \, h \in \mathcal{P}_j , &amp; (3)\\
&amp; \sum_{j=2}^{J-1} \sum_{m=1}^{M_j} k_{jmr}^{\rho} \sum_{q=\max\{t,\mathrm{EF}_j\} }^{\min \{ t+p_{jm}-1,\mathrm{LF}_j \}}  x_{jm,q} \le K_r^{\rho}, \,\,\,  r\in R^{\rho}, \, t=1,\ldots, \bar{T}, &amp; (4) \\
&amp; \sum_{j=2}^{J-1} \sum_{m=1}^{M_j} k_{jmr}^{\nu}   \sum_{t=\mathrm{EF}_J}^{\mathrm{LF}_J}  x_{jm,t} \le K_r^{\nu}, \,\,\, r\in R^{\nu},  &amp; (5)\\
&amp; x_{jm,t}  \in \{0,1\}, \,\,\, j=1,\ldots,J, \, m=1,\ldots ,M_j, \, t =0,\ldots, \bar{T}, &amp; (6)
\end{align}\]</span> where <span class="math inline">\(\mathcal{P}_j\)</span> is the set of predecessors of job <span class="math inline">\(j,\)</span> the earliest finish and latest finish times of job <span class="math inline">\(j\)</span> are denoted <span class="math inline">\(\mathrm{EF}_j,\)</span> <span class="math inline">\(\mathrm{LF}_j,\)</span> an upper bound on the project’s makespan is given by <span class="math inline">\(\bar{T}\)</span>, and we have denoted renewable resources by the index <span class="math inline">\(\rho\)</span> and non-renewables by <span class="math inline">\(\nu.\)</span></p>
<p>Note that objective (1) is the minimization of the makespan<a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a>, the constraints (2) indicate that each activity is assigned exactly one mode and exactly one finish time, (3) ensures that no activity is started until all its predecessors are finished, (4) ensures that the per-period levels of the renewable resources are met, and consumption of the nonrenewable resources is limited to their availabilities by (5). Finally, restricting the summations<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a> over time to the intervals <span class="math inline">\([\mathrm{EF}_j, \mathrm{LF}_j]\)</span> reduces drastically the number of variables and gives better convergence. These time windows can be computed by simple forward and backward recursion loops.</p>
<div class="no-row-height column-margin column-container"><div id="fn11"><p><sup>11</sup>&nbsp;To which we can add any cost function of the duration.</p></div><div id="fn12"><p><sup>12</sup>&nbsp;This produces what is known as a <em>tighter</em> formulation.</p></div><div id="fn13"><p><sup>13</sup>&nbsp;Or terms, if other costs are to be taken into account, e.g.&nbsp;related to sustainability</p></div></div><p><strong>Multi-Objective</strong> To include infrastructure costs in the objective function, we just add a term<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a> <span class="math display">\[\begin{align}
\min \quad &amp;  \sum_{t=\mathrm{EF}_J}^{\mathrm{LF}_J} t\cdot x_{J1,t}
                  + \sum_{j,m} c_{jm} x_{jm} &amp; (1')\\
\end{align}\]</span> where <span class="math inline">\(c_m\)</span> is the cost associated with the use of facility <span class="math inline">\(m\)</span> for task <span class="math inline">\(j.\)</span></p>
<p><strong>Multi-Project</strong> We can also perform simultaneous scheduling of a set of multiple projects taking into account the availability of local and global resources under different time and resource constraints. This has practical importance, at national and European levels, when cross-facility implies exploitation of cyberinfrastructure resources across different countries, for example, as would be the case for EuroHPC<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a>, at the European level, or GENCI<a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a> for France. Imagine being able to plan and pilot multiple exascale projects, on multiple sites, over multiple countries…<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a></p>
<div class="no-row-height column-margin column-container"><div id="fn14"><p><sup>14</sup>&nbsp; <a href="https://www.eurohpc-ju.europa.eu/">https://www.eurohpc-ju.europa.eu/</a> </p></div><div id="fn15"><p><sup>15</sup>&nbsp; <a href="https://www.genci.fr/">https://www.genci.fr//</a> </p></div><div id="fn16"><p><sup>16</sup>&nbsp;These would be multiple states, in the USA context.</p></div><div id="fn17"><p><sup>17</sup>&nbsp;SCCP</p></div></div><p><strong>Conclusion</strong> This general formulation of the RCPSP is then mathematically equivalent to the supply chain configuration problem<a href="#fn17" class="footnote-ref" id="fnref17" role="doc-noteref"><sup>17</sup></a> with the addition of resource constraints. The loop is closed.</p>
</section>
</section>
<section id="dynamic-networks" class="level2">
<h2 class="anchored" data-anchor-id="dynamic-networks">Dynamic Networks</h2>
<p>We can generalize the supply chain by considering a multi-stage network with an added time dimension. This enables flow and carrying of data and jobs across time periods, in addition to flow among facilities. For example, if certain facilites become unavailable, or less available, as the project evolves over time. This is a kind of recourse, which will be considered below in Section <a href="#sec-stoch" class="quarto-xref"><span>Uncertainty</span></a>.</p>
<div id="fig-wf3" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-wf3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart LR
    subgraph t1["t = 1"]
    direction LR
    a1((" "))--&gt;a2((" "))
    a1--&gt;a3((" "))
    a2--&gt;a4((" "))
    a2-.-&gt;a5((" "))
    end
    subgraph t2["t = 2"]
    direction LR
    b1((" "))--&gt;b2((" "))
    b1--&gt;b3((" "))
    b2-.-&gt;b4((" "))
    b2--&gt;b5((" "))
    end
    t1 --&gt; t2
    style t1 fill: white
    style t2 fill: white
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-wf3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5: Multi-stage, dynamic network that evolves over time due to changing availability constraints.
</figcaption>
</figure>
</div>
</section>
<section id="sec-stoch" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="sec-stoch">Uncertainty</h2>
<p>In practice some of the scheduling parameters may be uncertain. The exact duration of an activity, for instance, might not be known at the beginning of the project. Similarly, the number of available resources is another parameter that may not be known before project execution. These uncertainties may be due to different sources, including estimation errors, unforeseen (weather) conditions, late “delivery” (unavailability) of some required resources, unpredictable incidents such as machine breakdown or worker accidents, etc.</p>
<section id="stochastic-multistage-programming" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="stochastic-multistage-programming">Stochastic, multistage programming</h3>
<p><strong>Background</strong></p>
<p>Stochastic programming/optimization (optimal decision-making under uncertainty) is the part of mathematical programming and operations research that studies how to incorporate uncertainty into decision problems. Stochastic programs are primarily about transient decision making.</p>
<div class="warning" style="background-color:#E9D8FD; color: #69337A; border-left: solid #b199e4 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="margin-top:1em; text-align:center">
<b>Information:</b>
</p>
<p style="margin-left:1em;">
Some decisions must be made today, but important information will not be available until after the decision is made.
</p>
</span></div>
<p>An <em>information stage</em> (normally simply called “stage”) is the most important concept that distinguishes stochastic programming. A stage is a point in time where decisions are made within a model. Stages define the boundaries of time intervals. Stages sometimes follow naturally from the problem setting and sometimes are modeling approximations.</p>
<p>The starting point of a stochastic program is the present situation. The model is intended to tell us what to do in light of our goals, constraints, and resources. We then ask what we should do. We are not asking what to do in all possible situations, just what to do based on our present state.</p>
<ul>
<li>An inherently <em>two-stage model</em> is a model where the first decision is a major long-term decision, whereas the remaining stages represent the use of this investment. In these cases, mathematically speaking, the first stage will look totally different from the remaining stages, which will all look more or less the same. This is a very important class of models, possibly the most important one for stochastic programming.</li>
<li>In inherently <em>multistage models</em>, all stages are of the same type. We face random resource availability, energy prices, unexpected maintenance, etc. We should not confuse information stages with time periods. Stages model the flow of information; time periods represent the ticking of the clock in a model. Stages, on the other hand, are points in time where we make decisions in the model after having learned something new.</li>
</ul>
<p>Finding a good trade-off between time periods and stages is often crucial when modeling, as it has consequences for model quality, data collection, and solvability of the model.</p>
<div class="warning" style="background-color:#E9D8FD; color: #69337A; border-left: solid #805AD5 4px; border-radius: 4px; padding:0.7em;">
<span>
<p style="margin-top:1em; text-align:center">
<b>Warning/Fact:</b>
</p>
<p style="margin-left:1em;">
In the long run we are all dead.
</p>
<p style="margin-bottom:1em; margin-right:1em; text-align:right; font-family:Georgia">
<b>- John Maynard Keynes</b> <i>(A Tract on Monetary Reform, 1923)</i>
</p>
<p></p>
</span></div>
<p>In other words, one should not wait too long before taking a decision.</p>
<p><strong>Mathematical Formulation</strong></p>
<div id="fig-sdp" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sdp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="graphics/sdp.png" class="img-fluid figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sdp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6: A multistage decision process with uncertainty. Uncertain, exogenous inputs <span class="math inline">\(\xi_t\)</span> arrive, starting from stage <span class="math inline">\(t=2,\)</span> and trigger subsequent recourse actions.
</figcaption>
</figure>
</div>
<p>In the Figure we depict a generic multistage decision process with state <span class="math inline">\(\mathbf{x}_t\)</span> that evolves over time, starting at stage <span class="math inline">\(t=1,\)</span> and then receives uncertain, exogenous inputs, <span class="math inline">\(\xi_2, \xi_3, \ldots, \xi_T,\)</span> at given stages <span class="math inline">\(t = 2,3,\ldots, T.\)</span> At stage 1, a here-and-now (deterministic) decision is taken. The subsequent sequence of wait-and-see decision functions <span class="math inline">\({\mathbf{x}_t(\xi_t)}_{t\in [T]}\)</span> constitutes a <em>policy</em>, <span class="math inline">\(\pi.\)</span> The policy thus obtained, provides a decision rule for all stages <span class="math inline">\(t \in [T].\)</span> The aim of the decision process (stochastic multistage optimization) is then to compute an <em>optimal policy</em> for a given objective and subject to constraints.</p>
<p>We will describe in detail the two-stage problem, since the multistage is a straightforward generalisation. In the stochastic setting, we can naturally classify <span class="math inline">\(x\in\mathscr{X}\)</span> as the <em>first-stage</em> decision variables, since the initial facilities<a href="#fn18" class="footnote-ref" id="fnref18" role="doc-noteref"><sup>18</sup></a> are fixed and <span class="math inline">\(y\in\mathbb{R}^{\left|\mathscr{A}\right|\times\left|\mathscr{K}\right|}\)</span> as the <em>second-stage</em> decision variables, since the job-flow operating conditions are uncertain over time.</p>
<div class="no-row-height column-margin column-container"><div id="fn18"><p><sup>18</sup>&nbsp;Data centers, HPC centers, networks. </p></div></div><p>The two-stage stochastic linear program <span class="citation" data-cites="birgelouveaux2011">(<a href="index.html#ref-birgelouveaux2011" role="doc-biblioref">Birge and Louveaux 2011</a>)</span>, <span class="citation" data-cites="shapiro_lectures_2009">(<a href="index.html#ref-shapiro_lectures_2009" role="doc-biblioref">Shapiro, Dentcheva, and Ruszczyński 2009</a>)</span> is then</p>
<p><span class="math display">\[\begin{align} \label{eq:2stage}
\min_{x\in\mathscr{X}} &amp; \,\,c^{\top}x + \mathrm{E}\left[Q(x;\xi)\right],
\end{align}\]</span> where <span class="math inline">\(Q(x;\xi)\)</span> is the optimal value of the second-stage problem <span class="math display">\[\begin{align*}
\min_{y\ge0} &amp; \,\,q^{\top}y\\
\textrm{s.t.} &amp; \,\,Ny=0,\\
&amp; Cy\ge d,\\
&amp; Sy\le s,\\
&amp; Ry\le Mx,
\end{align*}\]</span> where <span class="math inline">\(d\)</span> is the (uncertain) resource demand, <span class="math inline">\(s\)</span> is the (uncertain) resource supply, the random vector <span class="math inline">\(\xi=(q,d,s,R,M)\)</span> and <span class="math inline">\(y=y(\xi).\)</span> The expectation is taken with respect to the joint probability distribution function<a href="#fn19" class="footnote-ref" id="fnref19" role="doc-noteref"><sup>19</sup></a> of <span class="math inline">\(\xi.\)</span> In the terminology of state-space, we can consider <span class="math inline">\(x\)</span> as the <em>state</em> variable, and <span class="math inline">\(y\)</span> as the <em>control</em> variable.</p>
<div class="no-row-height column-margin column-container"><div id="fn19"><p><sup>19</sup>&nbsp;Either continuous or discrete, it is derived either from theory or observations, or both.</p></div></div><p>To treat the occurrence of infeasibility, where the first-stage solution does not satisfy the second-stage constraints, e.g.&nbsp;<span class="math inline">\(Cy\nleqslant d,\)</span> we introduce a <em>recourse</em> action <span class="math inline">\(z\)</span> that supplies the deficit <span class="math inline">\(d-Cy\)</span> at some penalty cost. Then the second-stage problem becomes <span class="math display">\[\begin{align*}
\min_{y\ge0} &amp; \,\,q^{\top}y+h^{\top}z\\
\textrm{s.t.} &amp; \,\,Ny=0,\\
&amp; Cy+z\ge d,\\
&amp; Sy\le s,\\
&amp; Ry\le Mx,
\end{align*}\]</span> where <span class="math inline">\(h\)</span> represents the vector of (positive) recourse costs.</p>
<p>In the multistage case, we will have a succession of recourse stages, yielding the multistage program <span class="citation" data-cites="powell2022">(<a href="index.html#ref-powell2022" role="doc-biblioref">Powell 2022</a>)</span>,</p>
<p><span class="math display">\[
    \min_{\pi \in \Pi} \mathrm{E} \left[ \sum^{T}_{t=1} \gamma^{t-1} f_t(x_t;\xi_t) \right],
\]</span> subject to <span class="math display">\[
     x_t \in \mathcal{X}_t(x_{t-1};\xi_{t-1}), \quad t=1 \ldots, T,
\]</span> where <span class="math inline">\(\pi\)</span> is a policy, <span class="math inline">\(\gamma\)</span> is a discount factor, <span class="math inline">\(f_t\)</span> is a cost function, <span class="math inline">\(x_t\)</span> is a decision and <span class="math inline">\(\mathcal{X}_t\)</span> are the constraints. A policy is, by definition, a method that optimizes the objective. For example, in Google maps, the policy is to decide whether to turn left or right by optimizing over the time required to transverse the next link in the network plus the remaining time to get to the destination.</p>
<p>Note that there are various forms of minimization in stochastic scheduling. Whenever an objective function has to be minimized, it has to be specified in what sense the objective has to be minimized.</p>
<ul>
<li><em>Expectation</em> sense is the crudest form of optimization, e.g., one wishes to minimize (a function of) the expected makespan, that is <span class="math inline">\(\mathrm{E}\left[f\left(C_{\mathrm{max}}\right)\right],\)</span> and find a policy under which the expected makespan is smaller than the expected makespan under any other policy.</li>
<li><em>Stochastic</em> sense is a stronger form of optimization. If a schedule or policy minimizes <span class="math inline">\(f\left(C_{\mathrm{max}}\right)\)</span> stochastically, then the makespan under the optimal schedule or policy is stochastically (in probability, or in law) less than the makespan under any other schedule or policy.</li>
</ul>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list" style="display: none">
<div id="ref-birgelouveaux2011" class="csl-entry" role="listitem">
Birge, John R., and François Louveaux. 2011. <em>Introduction to Stochastic Programming</em>. <span>Second edition</span>. Springer New York, NY. <a href="https://doi.org/10.1007/978-1-4614-0237-4">https://doi.org/10.1007/978-1-4614-0237-4</a>.
</div>
<div id="ref-powell2022" class="csl-entry" role="listitem">
Powell, Warren B. 2022. <em>Reinforcement Learning and Stochastic Optimization: A Unified Framework for Sequential Decisions</em>. John Wiley &amp; Sons.
</div>
<div id="ref-shapiro_lectures_2009" class="csl-entry" role="listitem">
Shapiro, Alexander, Darinka Dentcheva, and Andrzej Ruszczyński. 2009. <em>Lectures on <span>Stochastic</span> <span>Programming</span></em>. SIAM, Society for Industrial; Applied Mathematics. <a href="https://doi.org/10.1137/1.9780898718751">https://doi.org/10.1137/1.9780898718751</a>.
</div>
</div>
</section>
</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="./intro.html" class="pagination-link" aria-label="Introduction">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Introduction</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./examples.html" class="pagination-link" aria-label="Implementation">
        <span class="nav-page-text"><span class="chapter-title">Implementation</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>